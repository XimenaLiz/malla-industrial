<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular Interactiva</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f3f4f6;
      padding: 2rem;
    }
    h1 {
      text-align: center;
    }
    .ciclo {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      padding: 1rem;
      background: #e5e7eb;
      border-radius: 1rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
    }
    .titulo-ciclo {
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }
    .curso {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: white;
      border-left: 6px solid #3b82f6;
      padding: 0.8rem 1rem;
      border-radius: 1rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      position: relative;
      cursor: pointer;
      transition: opacity 0.3s;
    }
    .curso.completado {
      opacity: 0.3;
      text-decoration: line-through;
    }
    .nombre {
      font-weight: bold;
      flex-grow: 1;
    }
    .icono-info {
      background: #3b82f6;
      color: white;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
      margin-left: 10px;
    }
    .descripcion {
      display: none;
      background: #f9fafb;
      margin-top: 0.5rem;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular Interactiva</h1>
  <div id="contenedor"></div>

  <script>
    const cursos = [
      {
        nombre: "Matemática básica",
        ciclo: 1,
        descripcion: "Conjuntos de números reales, ecuaciones e inecuaciones, geometría analítica y funciones...",
        prerrequisitos: []
      },
      {
        nombre: "Cálculo I",
        ciclo: 2,
        descripcion: "Funciones trigonométricas, límites y continuidad, derivadas, integral indefinida...",
        prerrequisitos: ["Matemática básica"]
      },
      {
        nombre: "Álgebra Lineal",
        ciclo: 2,
        descripcion: "Vectores, matrices, álgebra matricial...",
        prerrequisitos: ["Matemática básica"]
      }
      // Agregar todos los demás cursos en formato similar...
    ];

    const estadoCursos = {};

    function render() {
      const contenedor = document.getElementById("contenedor");
      contenedor.innerHTML = "";

      const ciclosUnicos = [...new Set(cursos.map(c => c.ciclo))].sort((a, b) => a - b);

      ciclosUnicos.forEach(ciclo => {
        const bloque = document.createElement("div");
        bloque.className = "ciclo";

        const titulo = document.createElement("div");
        titulo.className = "titulo-ciclo";
        titulo.textContent = `Ciclo ${ciclo}`;
        bloque.appendChild(titulo);

        cursos.filter(c => c.ciclo === ciclo).forEach(curso => {
          const div = document.createElement("div");
          div.className = "curso";
          div.dataset.nombre = curso.nombre;
          if (!prerrequisitosCumplidos(curso)) div.style.opacity = 0.2;
          if (estadoCursos[curso.nombre]) div.classList.add("completado");

          const span = document.createElement("span");
          span.className = "nombre";
          span.textContent = curso.nombre;
          div.appendChild(span);

          const info = document.createElement("div");
          info.className = "icono-info";
          info.textContent = "i";
          info.onclick = e => {
            e.stopPropagation();
            descripcion.style.display = descripcion.style.display === "block" ? "none" : "block";
          };

          const descripcion = document.createElement("div");
          descripcion.className = "descripcion";
          descripcion.textContent = curso.descripcion;

          div.appendChild(info);
          div.appendChild(descripcion);

          div.onclick = () => {
            estadoCursos[curso.nombre] = !estadoCursos[curso.nombre];
            render();
          };

          bloque.appendChild(div);
        });

        contenedor.appendChild(bloque);
      });
    }

    function prerrequisitosCumplidos(curso) {
      return curso.prerrequisitos.every(p => estadoCursos[p]);
    }

    render();
  </script>
</body>
</html>